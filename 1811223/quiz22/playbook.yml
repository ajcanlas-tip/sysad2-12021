---
- name: Installing Apache, MySQL and PHP Packages
  hosts: ubuntu

  tasks:
    
    - name: Installing Apache
      apt:
        name: apache2
        state: latest
        update_cache: yes

    - name: Allowing HTTP traffic
      ufw:
        rule: allow
        direction: in
        name: Apache

    - name: Install MySQL Server
      apt:
        name: mysql-server
        state: latest

    - name: Installing PHP Packages
      apt:
        name:
          - php
          - libapache2-mod-php
          - php-mysql
