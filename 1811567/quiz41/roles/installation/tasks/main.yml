---
- name: packages installation
  apt:
   name:
    - apache2
    - libapache2-mod-php
    - libgd-dev
    - build-essential
    - unzip
   state: latest
   update_cache: yes

- name: Creating group
  group:
   name: nagios
   state: present

- name: Nagios group 
  group:
   name: Ngrp
   state: present

- name: Nagios user
  user:
   name: nagios
   shell: /bin/bash
   comment: nagios user
   group: nagios
   password: $5$pajQORxaS0ImXWXa$oNIAW.Dg8R.EE9yMsQ9Y0iDRdazl8hRxWjzGJnMdru0

- name: Assigning user for external commands in nagios
  user:
   name: nagios
   group: Ngrp
   append: yes

- name: Assigning user group for External Command
  user:
   name: www-data
   group: Ngrp
   append: yes

- name: Create directories
  file:
   path: /downloads
   state: directory
   owner: nobody
   group: nogroup

- name: Nagios installation
  get_url:
   url: http://prdownloads.sourceforge.net/sourceforge/nagios/nagios-4.2.1.tar.gz
   dest: /downloads

- name: plugins installation
  get_url:
   url: https://nagios-plugins.org/download/nagios-plugins-2.3.3.tar.gz
   dest: /downloads
# tasks file for roles/installation