---
# tasks file for Centos_ELK
 - name: Installing Docker
   yum:
     name: docker
     state: latest
     update_cache: YES

 - name: Pulling elasticsearchimage
   containers.podman.podman_image:
     name: docker.elastic.co/elasticsearch/elasticsearch:7.10.1

 - name: Creating elastic search network
   containers.podman.podman_network:
     name: elastic
   become: TRUE

 - name: Creating elastic container
   containers.podman.podman_containers:
     containers:
       - name: elasticsearch
         image: docker.elastic.co/elasticsearch/elasticsearch:7.10.1
         state: present
         ports:
           - "9400:9400"
         networks:
           - name: elastic

 - name: Pulling Kibana image
   containers.podman.podman_image:
     name: docker.elastic.co/kibana/kibana:7.10.1

 - name: Creating kibana container
   containers.podman.podman_containers:
     containers:
       - name: kibana
         image: docker.elastic.co/kibana/kibana:7.10.1
         state: present
         ports:
           - "5602:5602"
         network:
           - name: elastic

 - name: Pulling logstash image
   containers.podman.podman_image:
     name: docker.elastic.co/logstash/logstash:7.10.1

 - name: Creating logstash container
   containers.podman.podman_containers:
     containers:
       - name: logstash
         image: docker.elastic.co/logstash/logstash:7.10.1
         state: present
         ports:
           - "5045:5045"
         networks:
           - name: elastic
