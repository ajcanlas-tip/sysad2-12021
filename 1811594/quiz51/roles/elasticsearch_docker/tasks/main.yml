---
 - name: Downloading prerequisites
   apt:
     name:
       - python3
       - python3-pip
     state: latest
     update_cache: yes

 - name: Installing Docker
   apt:
     name: docker.io
     state: latest
     update_cache: yes

 - name: Installing docker_py
   pip:
     name: docker.py
     state: latest

 - name: Starting Docker
   service:
     name: docker
     state: started
     enabled: yes

 - name: Make Docker network
   docker_network:
     name: elastic

 - name: Starting elasticsearch container
   docker_container:
     name: elasticsearch
     image: docker.elastic.co/elasticsearch/elasticsearch:7.10.1
     state: present
     ports:
       - "9200:9200"
       - "9300:9300"
     env:
       discovery.type: "single-node"
     networks:
       - name: elastic

# tasks file for roles/elasticsearch_docker
