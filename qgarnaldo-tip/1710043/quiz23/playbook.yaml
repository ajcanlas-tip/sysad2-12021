---
###Playbook

  - name: Installing Apache and Updating the Firewall
    hosts: ubuntu

    tasks:
        - name: Install Apache using package manager
          apt:
              name: apache2
              state: latest
              update_cache: no

        - name: Allow traffic on port 90
          ufw:
              name: apache2
              port: '80'

  - name: Installing MySQL
    hosts: ubuntu
    
    tasks:
        - name: Install mysql
          apt:
            name: mysql-server
            state: latest
            update_cache: no

  - name : Installing PHP Packages
    hosts: ubuntu

    tasks:
        - name : PHP package install
          apt:
            name: 
              - php
              - libapache2-mod-php
              - php-mysql
            state: latest
            update_cache: no

  - name : Creating a Virtual Host
    hosts: ubuntu

    tasks:              
        - name: Enable virtual host
          a2ensite:
            host: your_domain

        - name: Disable default website
          a2dissite:
            name: 000-default
