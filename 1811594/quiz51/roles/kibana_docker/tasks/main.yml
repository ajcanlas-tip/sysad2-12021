---
- name: Dismiss elasticsearch container
  docker_container:
   name: elasticsearch
   state: absent

- name: Make a new network for elastic
  docker_network:
   name: elastic

- name: Make elasticsearch container
  docker_container:
   name: elasticsearch
   image: docker.elastic.co/elasticsearch/elasticsearch:7.10.1
   ports:
      - "9200:9200"
      - "9300:9300"
   env:
     discovery.type: "single-node"
   networks:
     - name: elastic
   networks_cli_compatible: yes

- name: Make kibana container
  docker_container:
   name: kibana
   image: docker.elastic.co/kibana/kibana:7.10.1
   networks: 
    - name: elastic
   networks_cli_compatible: yes
   env:
    discovery.type: "single-node"
   ports:
      - "5601:5601"

# tasks file for roles/kibana_docker
