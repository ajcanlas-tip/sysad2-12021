---
# tasks file for ubuntu-httpd

- name: Installing apache2 via apt
  apt:
    name: apache2
    state: present
    update_cache: yes

- name: installing php via dnf
  dnf:
    name:
      - php7.4
      - php7.4-mysql
      - php-common
      - php7.4-cli
      - php7.4-json
      - php7.4-common
      - php7.4-opcache
      - libapache2-mod-php7.4

- name: starting apache2
  systemd:
    name: apache2
    state: started
    enabled: yes

- name: Creating info.php
  copy:
    dest: /var/www/html/info.php
    content: "|
      <?php
       phpinfo ();
      ?>"

- name: testing php availabilty
  uri:
    url: http://192.168.120.2/info.php
